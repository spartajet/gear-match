package com.spartajet.gear.match.view.utility

import javafx.scene.canvas.Canvas
import org.jfree.chart.JFreeChart
import org.jfree.fx.FXGraphics2D
import java.awt.geom.Rectangle2D

/**
 * @description
 * @create 2017-06-08 下午8:20
 * @email spartajet.guo@gmail.com
 */
class JFreeChartCanvas(val jFreeChart: JFreeChart) : Canvas() {

    private val graphic: FXGraphics2D = FXGraphics2D(graphicsContext2D)

    init {
        widthProperty().addListener { _ -> draw() }
        heightProperty().addListener { _ -> draw() }
    }

    private fun draw() {
        val width = width
        val height = height
        graphicsContext2D.clearRect(0.0, 0.0, width, height)
        jFreeChart.draw(this.graphic, Rectangle2D.Double(0.0, 0.0, width, height))
    }
    override fun isResizable() = true
    override fun prefWidth(height: Double) = width
    override fun prefHeight(width: Double) = height
}